# â˜• CafÃ© Criativo

ma aplicaÃ§Ã£o **Java/Spring Boot** para montar cafÃ©s personalizados, identificar receitas clÃ¡ssicas e gerenciar ingredientes com uma interface segura e estilizada. Servida com um toque de **Flyway**, **Docker** e seguranÃ§a embutida com **Spring Security**.

---

## ðŸš€ Tecnologias Utilizadas

- **Java 21 (Temurin)**
- **Spring Boot 3.x**
- **Spring Security**
- **Spring Data JPA (Hibernate)**
- **Flyway (migrations)**
- **PostgreSQL**
- **Docker & Docker Compose**
- **Thymeleaf** (views)
- **Lombok**
- **Cypress** (testes E2E frontend)
- **Robot Framework** (testes integraÃ§Ã£o backend)

---

## ðŸ“¦ Como rodar a aplicaÃ§Ã£o

### 1. PrÃ©-requisitos

- Docker e Docker Compose instalados
- (Opcional) Java 21 e Maven, caso queira rodar fora do container

### 2. Comandos

Dentro da pasta raiz do projeto:

```bash
docker-compose down -v        # remove containers e volume do banco
docker-compose up --build     # sobe banco e app, construindo o .jar com Maven
```
> Acesse a aplicaÃ§Ã£o em: http://localhost:8080/login

# ðŸ—„ï¸ Banco de Dados

| Sistema       | Banco         | UsuÃ¡rio   | Senha     | Porta |
|:--------------|:--------------|:----------|:----------|:------|
| PostgreSQL 15 | db_cafeteria  | postgres  | postgres  | 5432  |

# ðŸ“œ Migrations 

A pasta resources/db/migration/ contÃ©m arquivos Flyway, como:

```
V1__create_tables.sql

```
O Spring aplica as migrations automaticamente ao subir a aplicaÃ§Ã£o com Flyway habilitado.

---

## ðŸ“¬ Endpoints da AplicaÃ§Ã£o

| MÃ©todo | Caminho                   | Acesso        | DescriÃ§Ã£o                              |
|:---------|:--------------------------|:----------------|:-----------------------------------------|
| GET     | `/login`                  | PÃºblico        | PÃ¡gina de login                         |
| POST    | `/login`                  | PÃºblico        | AutenticaÃ§Ã£o via formulÃ¡rio             |
| GET     | `/home`                   | Autenticado    | PÃ¡gina inicial do sistema               |
| GET     | `/usuarios/cadastrar`     | PÃºblico        | Exibe tela de cadastro de usuÃ¡rio       |
| POST    | `/usuarios/cadastrar`     | PÃºblico        | Processa novo cadastro                  |
| POST    | `/seed`                   | PÃºblico (dev)  | Cria usuÃ¡rio admin se nÃ£o existir       |
| GET     | `/pedidos/montar`         | Autenticado    | Tela para montar um cafÃ© personalizado  |
| POST    | `/pedidos/base`           | Autenticado    | Seleciona ingredientes base             |
| POST    | `/pedidos/adicionais`     | Autenticado    | Seleciona ingredientes adicionais       |
| POST    | `/pedidos/finalizar`      | Autenticado    | Confirma pedido de cafÃ©                 |
| GET     | `/pedidos/meus-pedidos`   | Autenticado    | Lista pedidos do usuÃ¡rio logado         |

---

## âœ… Testes Automatizados

### ðŸ§ª Frontend â€“ Cypress

| Arquivo            | Caso de Teste                                                        |
|:-------------------|:---------------------------------------------------------------------|
| **login.cy.js**    | Login com dados vÃ¡lidos                                              |
|                    | Login com senha invÃ¡lida                                             |
|                    | Login com campos vazios                                              |
|                    | Redirecionamento pÃ³s-login                                           |
|                    | ExibiÃ§Ã£o de erro visual na falha de autenticaÃ§Ã£o                     |
|                    |                                                                      | 
| **cadastro.cy.js** | Cadastro com login jÃ¡ existente                                      |
|                    | Cadastro com campos vazios                                           |
|                    | Cadastro vÃ¡lido e redirecionamento para login                        |
|                    | ExibiÃ§Ã£o do formulÃ¡rio e botÃ£o de envio                              |
|                    | Link para "Entrar" funcionando                                       |
|                    |                                                                      | 
| **pedidos.cy.js**  | ExibiÃ§Ã£o correta dos pedidos apÃ³s login                              |
|                    | VerificaÃ§Ã£o de tabela de pedidos                                     |
|                    | ValidaÃ§Ã£o de preÃ§o formatado                                         |
|                    | Checagem de status estilizado (ex: status-pronto)                    |
|                    | NavegaÃ§Ã£o de volta para `/home`                                      |


âž¡ï¸ Formas de executar o cypress:

**Executar a interface grÃ¡fica (modo interativo):**

```bash
npx cypress open
```

**Executar os testes direto no terminal (modo headless):**

```bash
npx cypress run
```

---

### ðŸ¤– Backend â€“ Robot Framework

| Arquivo                     | Casos de Teste                                             |
|:----------------------------|:-----------------------------------------------------------|
| `login_tests.robot`         | Login com sucesso, invÃ¡lido, inexistente, falhas           |
| `cadastro_tests.robot`      | Cadastro vÃ¡lido, invÃ¡lido, login curto, mensagens de erro  |
| `pedidos_tests.robot`       | FinalizaÃ§Ã£o de pedidos, consultas autenticadas e bloqueios |

âž¡ï¸ Executar com:

```bash
robot robot-tests/tests
```

---


# ðŸ›¡ï¸ SeguranÃ§a

> BCryptPasswordEncoder usado para criptografar senhas

> Rotas protegidas com SecurityFilterChain

> AutenticaÃ§Ã£o via formulÃ¡rio (formLogin)

> UsuÃ¡rios possuem papel implÃ­cito: ADMIN ou USER

# ðŸŽ¨ Interface

As pÃ¡ginas Thymeleaf ficam em:

```
src/main/resources/templates/

```

> login.html: tela de login personalizada com o tema â€œCafÃ© Criativo â€“ Loginâ€

## ðŸ§¾ Cadastro e Acesso ao Sistema
Para utilizar o sistema da Cafeteria, o usuÃ¡rio precisa realizar um cadastro com os seguintes dados obrigatÃ³rios:

- Nome completo

- Login (nome de usuÃ¡rio Ãºnico)

- Senha

ApÃ³s o cadastro, o acesso deve ser feito usando:

- Login: mesmo valor preenchido no campo â€œUsuÃ¡rioâ€

- Senha: exatamente como foi cadastrada (atenÃ§Ã£o a maiÃºsculas e minÃºsculas)

> âš ï¸ Os pedidos realizados sÃ£o vinculados ao **login do usuÃ¡rio autenticado**. Portanto, Ã© necessÃ¡rio estar logado para visualizar corretamente a pÃ¡gina â€œMeus Pedidosâ€.

## â„¹ï¸ AutenticaÃ§Ã£o e visualizaÃ§Ã£o de pedidos
O sistema associa cada pedido ao usuÃ¡rio logado no momento da finalizaÃ§Ã£o. Isso significa que:

Os pedidos sÃ£o filtrados por **login (usuÃ¡rio autenticado)**, e nÃ£o pelo nome digitado no momento do pedido.

A pÃ¡gina â€œMeus Pedidosâ€ exibe **apenas** os pedidos realizados pelo usuÃ¡rio atualmente autenticado.

Isso garante seguranÃ§a e privacidade entre usuÃ¡rios distintos.

> ðŸ’¡ Exemplo: Se vocÃª estiver logado como alex, apenas os pedidos confirmados nesse login serÃ£o listados. Pedidos feitos anteriormente com o nome â€œjoseâ€, por outro login, nÃ£o aparecem.


> Estilo CSS em: static/css/cafeteria.css

# â˜• Contribuindo

> FaÃ§a um fork

> Crie uma branch com sua feature

> Envie um PR com um bom cafÃ© e descriÃ§Ã£o clara â˜•ðŸ˜„

# ðŸ“„ LicenÃ§a

> Projeto livre para fins educacionais.


https://github.com/alexeussouza/ProjetoJava-CafeCriativo/blob/main/1%20-%20login.JPG
